!function(E,b,S,M){"use strict";b.extend({Zoom:function(h,u){var i,t,s=h.root,m=h.options.zoom||{},n=m.max||1.5,a=m.min||.8,e=m.on||!1,l=m.scale||!1,f=m.click||!1,o=m.root||!1,r=m.rootClass||"is-zoomed",p=m.target||".slide__media",y=m.dragClass||"is-dragging",d="is-zoomable",c=1,g={x:0,y:0},x=null,v=null,w=null,Z=0,C={},z=null;return{currSlide:null,unZoomed:!1,mount:function(){var s=this;e&&(h.on("mounted.spz",function(){setTimeout(function(){s.wheelZoom()},500)}),h.on("active.spz",function(t){s.currSlide=t,s.unZoomed=!1,s.prepare()}),h.on("inactive.spz",function(t){s.currSlide=null,s.toogleClass(!1);t=E.find(t.slide,"."+d);E.isElm(t)&&s.scale(!1,t)}),s.dragon())},wheelZoom:function(){var e=this;(t=E.findAll(s,p)).length&&E.each(t,function(t){var s=E.find(t,"."+d);E.isElm(s)&&(e.scale(!1,s),e.bindWheel(t,!0,e.zoom.bind(e)))})},bindWheel:function(t,s,e){E[s?"on":"off"](t,"wheel",e,{passive:!0})},fit:function(t){var s=t.target||t,e=E.closest(s,".slide"),o=(a=e,"width"==="height"?a.offsetWidth:a.offsetHeight),i=o,n=0,t=s.naturalWidth,e=s.naturalHeight,a=b.attr(s,"width",e);s.style.width="auto",s.style.height="auto",i=i<t&&e<t?(l=i)/(n=t/e):(l=o<e&&t<e?o/(n=e/t):i,o);var l,o=a<o;s.dataset.sFit=o?1:0,s.dataset.sNw=t,s.dataset.sNh=e,s.dataset.sCw=l,s.dataset.sCh=i,s.dataset.sRatio=n,e=o,i=(l=s).dataset.sNw,n=l.dataset.sNh,o=l.dataset.sCw,s=l.dataset.sCh,n=E.attr(l,"height",n),i=E.attr(l,"width",i),l.style.width=(e?i:o)+"px",l.style.height=(e?n:s)+"px",l=E.closest(l,"picture"),E.isElm(l)&&(l.style.width=(e?i:o)+"px",l.style.height=(e?n:s)+"px")},prepare:function(){var s=this,t=E.findAll(M,"."+d);t.length&&E.each(t,function(t){E.isDecoded(t)?s.fit(t):E.one(t,"load",s.fit.bind(s))}),s.currSlide&&(v=E.find(s.currSlide.slide,p),E.isElm(v)&&(w=E.find(v,"."+d)))},zoomRoot:function(){return!E.isElm(x)&&o&&(x="string"==typeof o?E.find(M,o):o),E.isElm(x)?x:s},zoom:function(t){var s=this,e=b.wheelDelta(t);s.prepare(),c+=-.01*e,c=Math.min(Math.max(1,c),n),s.isZoomed()?(s.unZoomed=!1,s.scrollon(t)):s.unZoomed?(c=1,s.scale(!1,w)):s.scale(!s.isZoomed(),w)},scale:function(t,s){0;var e=t,o=s&&1===parseInt(s.dataset.sFit,0);this.toogleClass(e),s&&l&&!o&&(o=E.closest(s,".slide"),E.addClass(o,d+"-slide"),n=4<(n=Math.min(parseInt(s.dataset.sNw,0)/parseInt(s.dataset.sCw,0),parseInt(s.dataset.sNh,0)/parseInt(s.dataset.sCh,0)))?3:n,i=t?n:a,s.style.transform="scale("+i+")"),E.isElm(v)&&(e&&this.isZoomed()&&E.isElm(s)||(v.style.transform="translate(0px)"))},scrollon:function(t){var s=this;z&&S.cancelAnimationFrame(z),s.sizes(),!E.isEmpty(C)&&s.isValid()&&(z=S.requestAnimationFrame(function(){s._scrollon(t)}))},_scrollon:function(t){t.preventDefault(),t.stopPropagation();var s=E.isElm(v)&&E.find(v,"."+d),e=E.isElm(s)&&1===parseInt(s.dataset.sFit,0),o=Math.abs(C.h-C.ph)/1.5,s=b.wheelDelta(t),t=.5*o;return g.y+=0<s?-t:t,g.x=0,Z=Math.abs(g.y)>=o,0<s&&Z?g.y=-o:s<0&&Z&&(g.y=o),E.isElm(v)&&!e&&(v.style.transform="translate("+g.x+"px,"+g.y+"px)"),z=null,!1},dragon:function(){var e,o,i=this,t=i.zoomRoot(),n=!1,s=m,a=v,l=0;s.onClick=!!f&&i.clicked.bind(i),s.callback=function(t,s){a=s.el||a,g.x=s.x||0,g.y=s.y||0,i.sizes(),l=Math.ceil((C.h-C.ph)/2),o=s.dir,e=s.phase,a&&("start"===e?c("off"):"move"===e?i.isZoomed()?a.style.transform="translate("+g.x+"px,"+g.y+"px)":d():"end"===e&&function(){Z=Math.abs(g.y)>=l;var t="right"===o;t||"left"===o?(n=!0,g.x=t?0:-1):Z&&(n=!0,g.y="down"===o&&0<g.y?l:-l),setTimeout(function(){c("on"),i.isZoomed()?n&&(a.style.transform="translate("+g.x+"px,"+g.y+"px)"):d()},300)}())},s.dragClass=y;var r=[];function d(){a.style.transform="translate(0px)"}function c(t){i[t](),h.options={drag:!i.isZoomed()}}E.each(u.Elements.slides,function(t){t=E.find(t,p);E.isElm(t)&&r.push(t)}),s.elms=r,new SwipeDetect(t,s)},clicked:function(t){E.hasClass(t.target,d)?(this.unZoomed=!1,c=n,this.scale(!this.isZoomed(),t.target)):this.unZoomed=!0},sizes:function(t){return w=t||w,C=b.checkSizes(w,v)},isValid:function(){return this.prepare(),E.isElm(v)},isZoomed:function(){return e&&E.hasClass(this.zoomRoot(),r)},toogleClass:function(t){E[t?"addClass":"removeClass"](this.zoomRoot(),r)},on:function(){this.unZoomed=!1},off:function(){this.unZoomed=!0}}}})}(dBlazy,dSplide,this,this.document);
