(function(c,a,d){var b=function(k,J){var D=k.root;var B=k.options;var j=B.zoom||{};var F=j.max||4;var E=F/2;var H=j.on||false;var m=j.css||false;var n=j.click||false;var f=j.root||false;var g=j.rootClass||"is-zoomed";var A=j.target||".slide__media";var z=0.01;var K=1;var r={x:0,y:0};var p=null;var t=null;var h=null;var C=0;var y={};var i;var u;var I;var l;var v;var G;var x;var q="data-splide-cw";var w="data-splide-ch";var e="data-splide-nw";var s="data-splide-nh";return{currSlide:null,unZoomed:false,mount:function(){var o=this;if(H){k.on("active.spz",function(L){o.currSlide=L;o.unZoomed=false;h=L.slide.querySelector("img");o.prepare();if(h){o.sizes(h);if(y&&(y.nw||y.w)){i=y.w;u=y.h;I=y.nw||i;l=y.nh||u;o.toData(h);if(!a.attr(h,s)){h.setAttribute(q,i);h.setAttribute(w,u);h.setAttribute(e,I);h.setAttribute(s,l);x=a.resize(i,u,v,G);h.setAttribute("width",x.width);h.setAttribute("height",x.height)}}}});k.on("inactive.spz",function(L){o.zoomRoot().classList.remove(g);var M=L.slide.querySelector("img");o.scale(false,M)});d.setTimeout(function(){if(h){if(y&&(y.nw||y.w)){o.scale(false,h)}}},100);c.bindEvent(D,"wheel",o.zoom.bind(o),{passive:false});o.dragon()}},prepare:function(){if(h){t=c.closest(h,A);if(t===null){t=h.parentNode}}},zoomRoot:function(){if(p===null&&f){p=typeof f==="string"?document.querySelector(f):f}return !p?D:p},zoom:function(L){var o=this;var M=a.wheelDelta(L);t=t||L.target;h=h||t.querySelector("img");L.preventDefault();K+=M*-z;K=Math.min(Math.max(1,K),F);if(o.isZoomed()){o.unZoomed=false;o.scrollon(L)}else{if(o.unZoomed){K=1;o.scale(false,h)}else{o.scale(!o.isZoomed(),h)}}},scale:function(O,L){var N=this;var o=O?K:1;var M=O&&o>E;N.zoomRoot().classList[M?"add":"remove"](g);if(L!==null){if(!m){L.style.transform="scale("+o+")"}N.resize(L,M)}if(t&&(!M||!N.isZoomed())){t.style.transform="translate(0px)"}},scrollon:function(M){var L=this;if(!L.isValid()){return}L.sizes();var N=Math.abs(y.h-y.ph)/2;var O=a.wheelDelta(M);var o=(N*0.2);r.y+=O>0?-o:o;r.x=0;C=Math.abs(r.y)>=N;if(O>0&&C){r.y=-N}else{if(O<0&&C){r.y=N}}t.style.transform="translate("+(r.x)+"px,"+(r.y)+"px)"},dragon:function(){var U=this;var W=U.zoomRoot();var X;var O;var R=false;var o=j;var M=t;var V=0;var Y=function(aa,Z){M=Z.el||M;r.x=Z.x||0;r.y=Z.y||0;U.sizes();V=Math.ceil((y.h-y.ph)/2);O=Z.dir;X=Z.phase;if(M){if(X==="start"){L()}else{if(X==="move"){N()}else{if(X==="end"){P()}}}}};o.onClick=n?U.clicked.bind(U):false;o.callback=Y;var T=[];c.forEach(J.Elements.slides,function(Z){var aa=Z.querySelector(A);if(aa){T.push(aa)}});o.elms=T;new SwipeDetect(W,o);function L(Z){Q("off")}function N(){if(U.isZoomed()){M.style.transform="translate("+r.x+"px,"+r.y+"px)"}else{S()}}function P(){C=Math.abs(r.y)>=V;var Z=O==="right";if(Z||O==="left"){R=true;r.x=Z?0:-1}else{if(C){R=true;r.y=O==="down"&&r.y>0?V:-V}}d.setTimeout(function(){Q("on");if(U.isZoomed()){if(R){M.style.transform="translate("+r.x+"px,"+r.y+"px)"}}else{S()}},300)}function S(){M.style.transform="translate(0px)"}function Q(Z){U[Z]();k.options={drag:!U.isZoomed()}}},clicked:function(M){var o=this;var L=o.currSlide===null?c.closest(M.target,".slide.is-active"):o.currSlide.slide;if(L!==null&&c.equal(M.target,"img")){o.unZoomed=false;K=F;o.scale(!o.isZoomed(),M.target)}},sizes:function(o){h=o||h;y=a.checkSizes(h,t)},resize:function(o,M){var L=this;d.setTimeout(function(){L.sizes(o);L.toData(o);x=a.resize(i,u,v,G);if(M){o.style.height=x.height+"px"}else{o.style.height=u+"px"}})},toData:function(o){i=a.attr(o,q,i);u=a.attr(o,w,u);v=a.attr(o,e,I);G=a.attr(o,s,l)},isValid:function(){return h!==null&&t!==null},isZoomed:function(){return H&&this.zoomRoot().classList.contains(g)},on:function(){this.unZoomed=false},off:function(){this.unZoomed=true}}};a.extend({Zoom:b})})(dBlazy,dSplide,this);
